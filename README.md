# Xlop UDID Backend (PHP)

هذا الباك-إند بسيط لـ iOS Profile Service عشان تجيب UDID تلقائيًا.
مكوّن من ملفين PHP:
- `get-udid.php`: ينشئ ملف `mobileconfig` ويجبر iOS يرسل معلومات الجهاز.
- `udid.php`: يستقبل POST (PKCS#7) من iOS، يفكّه بالـ OpenSSL، يستخرج الـ UDID ويرجع المستخدم لواجهة الفرونت إند.

> المتطلبات
- استضافة تدعم PHP 7.4+ أو 8.x
- تفعيل OpenSSL في النظام (متوفر عادةً افتراضيًا)
- شهادة SSL فعّالة على الساب دومين (https إلزامي)

## الإعداد السريع
1) أنشئ ساب دومين: `api.xlop.com` يوجّه لمجلد مثل `/public_html/api`.
2) ارفع محتويات هذا المجلد هناك.
3) حرّر متغيرات الإعداد في أعلى الملفين (الدومين و رابط الرجوع).
4) جرّب من الآيفون عبر Safari:
   - افتح: `https://api.xlop.com/get-udid.php`
   - ثبّت ملف التعريف.
   - سيعيدك إلى واجهتك مع باراميتر `?udid=`
5) في واجهتك (GitHub Pages) اقرأ القيمة من `location.search` واملأ الحقل تلقائيًا.

## الأمن
- الـ UDID يُستخدم فقط لإكمال الطلب. لا تخزّنه بدون سبب.
- بإمكانك تفعيل تسجيل بسيط في `udid.php` لغايات تتبع الأخطاء.
- احذف الملفات المؤقتة تلقائيًا (الكود يفعل ذلك بالفعل).

## ملاحظات
- إذا لم يعمل الاستخراج، تأكد أن `openssl` يعمل على السيرفر (جرّب: `php -i | grep -i openssl`).
- بعض لوحات الاستضافة تتطلب تفعيل "exec"؛ إذا كانت معطّلة اطلب تفعيلها أو استخدم VPS.
